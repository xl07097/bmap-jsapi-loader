!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).BMapLoader={})}(this,(function(e){"use strict";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var o="notload",r={key:"",version:"2.0"},i=[];e.BMapLoader=function(e){return new Promise((function(a,c){if("notload"==o){var d=function(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?n(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r,{},e),f=d.key,p=d.version;if(!f)return void c("请填写key");window.BMap&&c("禁止多种API加载方式混用"),r={key:f,version:p},o="loading";var l=document.body||document.head;window.loadBMapCallback=function(e){for(delete window.loadBMapCallback,e?(o="failed",c(e)):(o="loaded",a(window.BMap));i.length;)i.splice(0,1)[0]()};var u=document.createElement("script");u.type="text/javascript",u.src="http://api.map.baidu.com/api?callback=loadBMapCallback&v="+p+"&ak="+f,u.onerror=function(e){o="failed",c(e)},l.appendChild(u)}else{if(e.key&&e.key!==r.key)return void c("多个不一致的 key");if(e.version&&e.version!==r.version)return void c("不允许多个版本 JSAPI 混用");"failed"==o&&c("前次加载已经失败"),"loaded"==o?a(window.BMap):"loading"==o&&function(e){if("function"==typeof e){if("loaded"==o)return void e(window.BMap);i.push(e)}}((function(){a(window.BMap)}))}}))},Object.defineProperty(e,"__esModule",{value:!0})}));
